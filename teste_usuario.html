<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Inser√ß√£o no Firebase</title>
</head>
<body>
  <h1>Inserir Nome no Firebase</h1>

  <!-- Bot√£o de envio -->
  <button id="inserirBtn">Inserir</button>
    
  <button id="mostrarBtn">Mostrasr</button>

  <label for="imagemInput">Selecionar imagem:</label>
  <input type="file" id="imagemInput" accept="image/*">
  
  <!-- Preview da imagem -->
  <div id="preview"></div>

    <script type="module">
      import * as Utils from './Utils/index.js';
      import * as Classes from './Classes/index.js'

      const inputImagem = document.getElementById("imagemInput");
      const preview = document.getElementById("preview");

      document.getElementById("mostrarBtn").addEventListener("click", async () => {
        const dadosUsuario = await Utils.searchUsuario(1);
        const user = Classes.Usuario.fromJSON(dadosUsuario);
        preview.innerHTML = `<img src="${user.Icone}" width="100">`;
      });

      document.getElementById("inserirBtn").addEventListener("click", async () => {
        const user = new Classes.Usuario();

        // Preenche os dados do usu√°rio
        user.ID_usuario = 1;
        user.Nome = "Laras";
        user.Email = "alexandre@email.com";
        user.Senha = "senhaSegura123";
        user.Nascimento = "1990-01-01";
        user.Casa_repouso = false;
        user.Endereco = "Rua Exemplo, 123";

        // Captura e converte imagem se houver
        const file = inputImagem.files[0];
        if (file) {
          const base64 = await Utils.imagemParaBase64(file);
          console.log("Imagem convertida em Base64:", base64);
          preview.innerHTML = `<img src="${base64}" width="100">`;
          user.Icone = base64;
        } else {
          alert("Nenhuma imagem selecionada.");
          return;
        }

        console.log(`üóëÔ∏è Registro preenchido: ${user.Nome}`);
        user.insertData();
      });
    </script>
</body>
</html>