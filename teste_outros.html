<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Inser√ß√£o no Firebase</title>
</head>
<body>
  <h1>Inserir Nome  Firebase</h1>

  <!-- Bot√£o de envio -->
  <button id="inserirBtn">Inserir</button>
    
  <button id="mostrarBtn">Mostrar</button>

  <label for="imagemInput">Selecionar imagem:</label>
  <input type="file" id="imagemInput" accept="image/*">
  
  <!-- Preview da imagem -->
  <div id="preview"></div>

    <script type="module">
      import * as Utils from './Utils/index.js';
      import * as Classes from './Classes/index.js'

      const inputImagem = document.getElementById("imagemInput");
      const preview = document.getElementById("preview");

      document.getElementById("mostrarBtn").addEventListener("click", async () => {
        const dadosUsuario = await Utils.searchUsuario(1);
        const user = Classes.Usuario.fromJSON(dadosUsuario);
        preview.innerHTML = `<img src="${user.Icone}" width="100">`;
      });

      document.getElementById("inserirBtn").addEventListener("click", async () => {
        const post = new Classes.Post();
        post.ID_post = 2;
        post.ID_usuario = 2;
        post.Titulo = "tit";
        post.Texto = "texto";
        post.Icone = "icon";
        post.Foto = "foto";
        post.Data = "data";
        post.insertData();
                
        const filtro = new Classes.Filtro();
        filtro.ID_Filtro = 2;
        filtro.Filtro = "filtro";
        filtro.insertData();
          
        const comentario = new Classes.Comentario();
        comentario.ID_comentario = 2;
        comentario.ID_post = 2;
        comentario.ID_usuario = 2; 
        comentario.Texto = "texto";
        comentario.Data = "data"; 
        comentario.insertData();

        const curtida_comentario = new Classes.Curtida_comentario();
        curtida_comentario.ID_Curtida_comentario = 2;
        curtida_comentario.ID_Usuario = 2;
        curtida_comentario.ID_Comentario = 2;
        curtida_comentario.insertData();
    
        const curtida_post = new Classes.Curtida_post();
        curtida_post.ID_Curtida_post = 2;
        curtida_post._ID_Post = 2;
        curtida_post._ID_Usuario = 2;
        curtida_post.insertData();
          
        console.log(`üóëÔ∏è Registros preenchidos`);
          
        const search_user = await Classes.Usuario.fromID(2);
        console.log("Usu√°rio encontrado: "+search_user.Nome);
        
        const search_post = await Classes.Post.fromID(2);
        console.log("Post encontrado: "+search_post.Texto);

        const search_filtro = await Classes.Filtro.fromID(2);
        console.log("Filtro encontrado: "+search_filtro.Filtro);

        const search_curtida_post = await Classes.Curtida_post.fromID(2);
        console.log("Curtida de post encontrado: "+search_curtida_post.ID_Usuario);

        const search_curtida_comentario = await Classes.Curtida_comentario.fromID(2);
        console.log("Curtida de coment√°rio encontrado: "+search_curtida_comentario.ID_Usuario);
        console.log("-> " + (await (await search_curtida_comentario.extractComentario()).extractPost()).Texto);

        const search_comentario = await Classes.Comentario.fromID(2);
        console.log("Coment√°rio encontrado: "+search_comentario.Texto);

        const posts = await Utils.searchPosts();
        posts.forEach(post => {
          console.log(post.Texto);
        });
      });
    </script>
</body>
</html>